<!DOCTYPE html>
<html
  data-wf-page="601a24bce7644328622a7286"
  data-wf-site="601a24bce764433e022a7272"
>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, user-scalable=false;" />
    <title>Summer of Code 2025 - Camera Component Enhancement</title>
    <meta
      content="Summer of Code site for Sebastian Vivas."
      name="description"
    />
    <meta content="Sebastian Vivas - Summer of Code 2025" property="og:title" />
    <meta
      content="Sebastian Vivas - Summer of Code 2025"
      property="og:description"
    />
    <link href="css/normalize.css" rel="stylesheet" type="text/css" />
    <link href="css/webflow.css" rel="stylesheet" type="text/css" />
    <meta content="Webflow" name="generator" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/flickity@2/dist/flickity.min.css"
    />
    <script src="https://npmcdn.com/flickity@2/dist/flickity.pkgd.js"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400;1,500;1,600&display=swap"
      rel="stylesheet"
    />
    <link
      href="css/portfolio-site-eeae4b-63385fc4b12c92965.webflow.css"
      rel="stylesheet"
      type="text/css"
    />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
      integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
      crossorigin="anonymous"
    />
    <link rel="shortcut icon" type="image/x-icon" href="assets/icon-tab.ico" />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
      integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp"
      crossorigin="anonymous"
    />
    <script
      src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=601a24bce764433e022a7272"
      type="text/javascript"
      integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
      integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
      crossorigin="anonymous"
    ></script>
    <script type="text/javascript">
      !(function (o, c) {
        var n = c.documentElement,
          t = " w-mod-";
        (n.className += t + "js"),
          ("ontouchstart" in o ||
            (o.DocumentTouch && c instanceof DocumentTouch)) &&
            (n.className += t + "touch");
      })(window, document);
    </script>
    <link href="images/favicon.png" rel="shortcut icon" type="image/x-icon" />
    <link href="images/webclip.png" rel="apple-touch-icon" />
    <script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"
    />
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://use.fontawesome.com/a891bb0a11.js"></script>
    <script src="js/script.js" charset="utf-8"></script>
    <style>
      pre {
        background-color: #f5f5f5;
        padding: 15px;
        border-radius: 4px;
        overflow-x: auto;
        font-family: Consolas, Monaco, "Andale Mono", monospace;
        border-left: 4px solid #2196f3;
        margin-bottom: 20px;
      }
      code {
        font-family: Consolas, Monaco, "Andale Mono", monospace;
        background-color: #f5f5f5;
        padding: 2px 4px;
        border-radius: 3px;
        font-size: 0.9em;
      }
      table {
        border-collapse: collapse;
        width: 100%;
        margin: 20px 0;
      }
      th,
      td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;
      }
      th {
        background-color: #f2f2f2;
      }
    </style>
    <script type="text/javascript">
      (window.heap = window.heap || []),
        (heap.load = function (e, t) {
          (window.heap.appid = e), (window.heap.config = t = t || {});
          var r = t.forceSSL || "https:" === document.location.protocol,
            a = document.createElement("script");
          (a.type = "text/javascript"),
            (a.async = !0),
            (a.src =
              (r ? "https:" : "http:") +
              "//cdn.heapanalytics.com/js/heap-" +
              e +
              ".js");
          var n = document.getElementsByTagName("script")[0];
          n.parentNode.insertBefore(a, n);
          for (
            var o = function (e) {
                return function () {
                  heap.push(
                    [e].concat(Array.prototype.slice.call(arguments, 0))
                  );
                };
              },
              p = [
                "addEventProperties",
                "addUserProperties",
                "clearEventProperties",
                "identify",
                "removeEventProperty",
                "setEventProperties",
                "track",
                "unsetEventProperty",
              ],
              c = 0;
            c < p.length;
            c++
          )
            heap[p[c]] = o(p[c]);
        });
      heap.load("1409449789");
    </script>
  </head>
  <body class="body-4">
    <div class="preloader">
      <div class="loading-info">
        <img
          src="images/circles-menu-1_1circles-menu-1.gif"
          alt=""
          class="loading-icon"
        />
        <div class="loading-text">Loading...</div>
      </div>
    </div>
    <div class="back-to-top">
      <div id="Top" class="top"></div>
      <a href="#Top" class="top-button w-inline-block"></a>
    </div>
    <div
      data-collapse="medium"
      data-animation="default"
      data-duration="400"
      role="banner"
      class="navbar w-nav"
    >
      <div class="w-container">
        <div
          data-w-id="a73d8662-7dc2-a7aa-1ff5-51e71ead72e1"
          class="nav-button-animated w-nav-button"
        >
          <div
            data-w-id="a73d8662-7dc2-a7aa-1ff5-51e71ead72e2"
            class="top-line"
          ></div>
          <div
            data-w-id="a73d8662-7dc2-a7aa-1ff5-51e71ead72e3"
            class="middle-line"
          ></div>
          <div
            data-w-id="a73d8662-7dc2-a7aa-1ff5-51e71ead72e4"
            class="bottom-line"
          ></div>
        </div>
        <nav role="navigation" class="nav-menu-2 w-nav-menu">
          <div class="div-block-3">
            <a
              data-w-id="a73d8662-7dc2-a7aa-1ff5-51e71ead72ed"
              href="about.html"
              class="d-109-link-block-wrapper w-inline-block"
            >
              <div class="d-109-top-text-wrapper">
                <div class="d-109-top-text">about</div>
                <div
                  style="
                    -webkit-transform: translate3d(-101%, 0, 0) scale3d(1, 1, 1)
                      rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);
                    -moz-transform: translate3d(-101%, 0, 0) scale3d(1, 1, 1)
                      rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);
                    -ms-transform: translate3d(-101%, 0, 0) scale3d(1, 1, 1)
                      rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);
                    transform: translate3d(-101%, 0, 0) scale3d(1, 1, 1)
                      rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);
                  "
                  class="d-109-top-text-line-through"
                ></div>
              </div>
            </a>
          </div>
          <div class="div-block-2">
            <a href="/" class="d-109-link-block-wrapper w-inline-block">
              <div class="d-109-top-text-wrapper">
                <div class="d-109-top-text">answers</div>
                <div class="d-109-top-text-line-through"></div>
              </div>
            </a>
          </div>
          <div class="div-block-2">
            <a
              href="./challenge2.html"
              class="d-109-link-block-wrapper w-inline-block"
            >
              <div class="d-109-top-text-wrapper">
                <div class="d-109-top-text">challenge 2</div>
                <div class="d-109-top-text-line-through"></div>
              </div>
            </a>
          </div>
          <div class="div-block-2">
            <a
              href="./downloads.html"
              target="_blank"
              class="d-109-link-block-wrapper w-inline-block"
            >
              <div class="d-109-top-text-wrapper">
                <div class="d-109-top-text">downloads</div>
                <div class="d-109-top-text-line-through"></div>
              </div>
            </a>
          </div>
          <div class="div-block-2">
            <a
              href="./images/Mit-App-Inventor-Proposal-BlockSearch.pdf"
              target="_blank"
              class="d-109-link-block-wrapper w-inline-block"
            >
              <div class="d-109-top-text-wrapper">
                <div class="d-109-top-text">proposal</div>
                <div class="d-109-top-text-line-through"></div>
              </div>
            </a>
          </div>
          <div class="div-block-4">
            <a
              data-w-id="a73d8662-7dc2-a7aa-1ff5-51e71ead72f3"
              target="_blank"
              href="./images/sebastian-vivas-resume.pdf"
              class="d-109-link-block-wrapper w-inline-block"
            >
              <div class="d-109-top-text-wrapper">
                <div class="d-109-top-text">Resume</div>
                <div
                  style="
                    -webkit-transform: translate3d(-101%, 0, 0) scale3d(1, 1, 1)
                      rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);
                    -moz-transform: translate3d(-101%, 0, 0) scale3d(1, 1, 1)
                      rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);
                    -ms-transform: translate3d(-101%, 0, 0) scale3d(1, 1, 1)
                      rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);
                    transform: translate3d(-101%, 0, 0) scale3d(1, 1, 1)
                      rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);
                  "
                  class="d-109-top-text-line-through"
                ></div>
              </div>
            </a>
          </div>
        </nav>
      </div>
    </div>
    <div class="container-fluid">
      <div class="row" style="margin-top: 50px">
        <nav class="col-lg-3 col-md-3 hidden-sm hidden-xs">
          <div class="bs-docs-sidebar">
            <ul class="nav nav-stacked" id="sidebar">
              <li>
                <a href="#cameraReport">Camera Component Report</a>
                <ul class="nav nav-stacked">
                  <li>
                    <a href="#useFrontIssue">UseFront Property Investigation</a>
                  </li>
                  <li><a href="#benefits">Benefits to Community</a></li>
                  <li>
                    <a href="#autoCaptureDesign">AutoCapture Feature Design</a>
                  </li>
                  <li><a href="#implementation">Implementation Details</a></li>
                  <li><a href="#challenges">Implementation Challenges</a></li>
                  <li><a href="#timeline">Timeline and Milestones</a></li>
                  <li><a href="#conclusion">Conclusion</a></li>
                </ul>
              </li>
            </ul>
          </div>
        </nav>
        <div
          class="bg bg-eatxplore"
          data-aos="fade-up"
          data-aos-duration="600"
        ></div>
        <div
          id="top"
          class="section-2 haze"
          data-aos="fade-up"
          data-aos-duration="600"
        ></div>
        <div
          class="col-lg-7 col-md-7 col-sm-10 col-xs-12 col-centered main-content first-section"
        >
          <section
            id="cameraReport"
            class="group"
            data-aos="fade-up"
            data-aos-duration="600"
          >
            <h6></h6>
            <br /><br /><br /><br />
            <h1 class="work-heading-2">
              App Inventor Camera Component Enhancement Report
            </h1>
            <br />
            <div id="useFrontIssue" class="subgroup">
              <h4 class="heading-8">UseFront Property Investigation</h4>
              <p class="paragraph-4">
                I researched why the <code>UseFront</code> property in App
                Inventor's Camera component stopped working on newer Android
                devices. The issue relates to changes in Android's camera APIs.
              </p>

              <div class="paragraph-4">
                <p>
                  Android has gone through three main camera API generations:
                </p>
                <ul>
                  <li>
                    Camera API (original) - Simple but deprecated in Android 5.0
                    (API 21)
                  </li>
                  <li>Camera2 API - More complex, introduced in Android 5.0</li>
                  <li>CameraX - Newer Jetpack library</li>
                </ul>
              </div>

              <p class="paragraph-4">
                App Inventor likely uses the original Camera API, which had
                straightforward methods for selecting front/back cameras. When
                Android moved to Camera2, these methods became deprecated,
                causing the <code>UseFront</code> property to stop working
                correctly.
              </p>

              <p class="paragraph-4">
                The component wasn't updated to use Camera2 API, which requires
                a completely different approach to camera selection:
              </p>

              <ul>
                <li>Querying available camera IDs from the CameraManager</li>
                <li>Getting camera characteristics for each ID</li>
                <li>Checking the lens facing direction</li>
                <li>Setting up the camera with the selected ID</li>
              </ul>
            </div>

            <div id="benefits" class="subgroup">
              <h4 class="heading-8">Benefits to Community</h4>
              <p class="paragraph-4">
                I found forum posts from App Inventor users who need to automate
                photo capture for projects. My solution directly addresses this
                need and benefits the community in key ways:
              </p>

              <p class="paragraph-4">
                Educational settings will be able to create more sophisticated
                science and documentation projects. Students can capture
                time-lapse sequences for experiments or create monitoring
                applications.
              </p>

              <p class="paragraph-4">
                Advanced users can build more powerful applications without
                resorting to native app development. This extends App Inventor's
                usefulness for serious applications like security monitoring or
                time-lapse photography.
              </p>

              <p class="paragraph-4">
                The open source community gains a feature that demonstrates
                block-based environments can support more advanced capabilities.
                This positions App Inventor as a more competitive option for
                certain use cases.
              </p>
            </div>

            <div id="autoCaptureDesign" class="subgroup">
              <h4 class="heading-8">AutoCapture Feature Design</h4>
              <p class="paragraph-4">
                I propose to develop an automatic capture feature for the Camera
                component that enables photos to be taken at regular intervals
                without user intervention. This system will let apps create
                time-lapse photography, automatic documentation, and monitoring
                applications.
              </p>

              <p class="paragraph-4">
                I will implement the AutoCapture feature as part of the existing
                Camera component rather than creating a new component. The
                enhanced Camera will have:
              </p>

              <h4>New Properties:</h4>
              <table>
                <tr>
                  <th>Property</th>
                  <th>Type</th>
                  <th>Description</th>
                </tr>
                <tr>
                  <td>AutoCapture</td>
                  <td>boolean</td>
                  <td>Turns automatic capture on/off</td>
                </tr>
                <tr>
                  <td>CaptureInterval</td>
                  <td>number</td>
                  <td>Time between captures in seconds (minimum 1)</td>
                </tr>
              </table>

              <h4>New Methods:</h4>
              <table>
                <tr>
                  <th>Method</th>
                  <th>Description</th>
                </tr>
                <tr>
                  <td>StartAutoCapture()</td>
                  <td>Begin taking pictures automatically</td>
                </tr>
                <tr>
                  <td>StopAutoCapture()</td>
                  <td>Stop the automatic capture process</td>
                </tr>
              </table>

              <h4>New Events:</h4>
              <table>
                <tr>
                  <th>Event</th>
                  <th>Description</th>
                </tr>
                <tr>
                  <td>AutoCaptureStarted</td>
                  <td>Fired when automatic capture begins</td>
                </tr>
                <tr>
                  <td>AutoCaptureStopped</td>
                  <td>Fired when automatic capture ends</td>
                </tr>
                <tr>
                  <td>OnIntervalPictureTaken</td>
                  <td>
                    Fired when each picture is taken, returns the image path
                  </td>
                </tr>
              </table>

              <h4>Files to Modify:</h4>
              <ul>
                <li>
                  <code
                    >appinventor/components/src/com/google/appinventor/components/runtime/Camera.java</code
                  >
                </li>
                <li>
                  <code
                    >appinventor/components/src/com/google/appinventor/components/common/PropertyTypeConstants.java</code
                  >
                </li>
                <li>
                  <code
                    >appinventor/docs/markdown/reference/components/media.md</code
                  >
                </li>
              </ul>
            </div>

            <div id="implementation" class="subgroup">
              <h4 class="heading-8">Implementation Details</h4>

              <p class="paragraph-4">My technical approach includes:</p>
              <ul>
                <li>Implementing the Camera2 API for Android 5.0+ devices</li>
                <li>Creating a Timer-based system for periodic captures</li>
                <li>
                  Building proper resource management to prevent camera leaks
                </li>
                <li>Ensuring backward compatibility for older devices</li>
              </ul>
              <h4>Implementation Approach for UseFront Fix:</h4>

              <pre><code>@SimpleProperty(description = "Use the front-facing camera if available")
public void UseFront(boolean useFront) {
  this.useFront = useFront;
  
  if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
    CameraManager cameraManager = (CameraManager) form.getSystemService(Context.CAMERA_SERVICE);
    try {
      for (String cameraId : cameraManager.getCameraIdList()) {
        CameraCharacteristics characteristics = cameraManager.getCameraCharacteristics(cameraId);
        Integer facing = characteristics.get(CameraCharacteristics.LENS_FACING);
        if (useFront && facing != null && facing == CameraCharacteristics.LENS_FACING_FRONT) {
          this.cameraId = cameraId;
          break;
        } else if (!useFront && facing != null && facing == CameraCharacteristics.LENS_FACING_BACK) {
          this.cameraId = cameraId;
          break;
        }
      }
    } catch (CameraAccessException e) {
      Log.e(TAG, "Camera access exception getting IDs", e);
    }
  } else {
    // Fall back to legacy Camera API for older versions and keep existing code here 
  }
}</code></pre>
              <br />
              <h4>Implementation Approach for AutoCapture:</h4>

              <pre><code>private boolean autoCapture = false;
private int captureInterval = 5; 
private Handler autoCaptureHandler = new Handler();
private Runnable autoCaptureRunnable;

@SimpleProperty(description = "Whether the camera should automatically take pictures")
public void AutoCapture(boolean autoCapture) {
  this.autoCapture = autoCapture;
  if (autoCapture) {
    startAutoCapture();
  } else {
    stopAutoCapture();
  }
}

@SimpleProperty
public boolean AutoCapture() {
  return autoCapture;
}

@SimpleProperty(description = "Time interval between automatic captures (in seconds)")
public void CaptureInterval(int seconds) {
  this.captureInterval = Math.max(1, seconds);
  if (autoCapture) {
    stopAutoCapture();
    startAutoCapture();
  }
}

@SimpleProperty
public int CaptureInterval() {
  return captureInterval;
}

@SimpleFunction(description = "Start automatic picture capturing")
public void StartAutoCapture() {
  if (!autoCapture) {
    AutoCapture(true);
  }
}

@SimpleFunction(description = "Stop automatic picture capturing")
public void StopAutoCapture() {
  if (autoCapture) {
    AutoCapture(false);
  }
}</code></pre>
            </div>
            <br />
            <div id="challenges" class="subgroup">
              <h4 class="heading-8">Implementation Challenges</h4>
              <ol class="paragraph-4">
                There are several challenges to consider:
                <li>
                  <strong>Resource Management</strong> - Properly opening and
                  closing the camera to prevent leaks
                </li>
                <li>
                  <strong>Background Behavior</strong> - Handling what happens
                  when the app moves to the background during auto-capture
                </li>
                <li>
                  <strong>Storage Handling</strong> - Managing the potentially
                  large number of images
                </li>
                <li>
                  <strong>Permission Handling</strong> - Ensuring camera
                  permissions are granted for background use
                </li>
                <li>
                  <strong>Battery Impact</strong> - Being mindful of the power
                  consumption of repeated captures
                </li>
              </ol>
            </div>

            <div id="timeline" class="subgroup">
              <h4 class="heading-8">Timeline and Milestones</h4>

              <h4>Phase 1: Research and Analysis (2 weeks)</h4>
              <ul>
                <li>
                  Study Android Camera2 API and existing App Inventor
                  implementation
                </li>
                <li>Create test apps to validate different approaches</li>
                <li>Design the API for the enhanced Camera component</li>
              </ul>

              <h4>Phase 2: Core Implementation (4 weeks)</h4>
              <ul>
                <li>Fix UseFront property for newer Android versions</li>
                <li>Implement AutoCapture functionality</li>
                <li>Create timer and resource management system</li>
                <li>Build test cases</li>
              </ul>

              <h4>Phase 3: Testing and Refinement (2 weeks)</h4>
              <ul>
                <li>Test on different Android versions</li>
                <li>Performance testing and optimization</li>
                <li>Edge case handling</li>
                <li>Documentation preparation</li>
              </ul>
            </div>
            <div id="conclusion" class="subgroup">
              <h4>Conclusion</h4>
              <p class="paragraph-4">
                This enhancement to the Camera component addresses two key
                issues: fixing the broken UseFront property and adding powerful
                automatic capture capabilities. By implementing these changes,
                App Inventor users will be able to create more sophisticated
                camera-based applications without leaving the block-based
                environment they're familiar with.
              </p>
            </div>
          </section>
        </div>
      </div>
    </div>
    <script src="js/webflow.js" type="text/javascript"></script>
    <script>
      AOS.init();
    </script>
  </body>
</html>
